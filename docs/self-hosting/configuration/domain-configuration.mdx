---
title: "Domain Configuration"
description: "Configuring your domain for Formbricks."
icon: "globe"
---

Formbricks supports both single domain and dual domain configurations with our new Public/Private Domain Split feature. This guide will help you set up your domains correctly for enhanced security and organization.

## Single Domain Setup

For a single domain setup, you need to configure two essential environment variables:

1. `WEBAPP_URL`: The base URL of your Formbricks instance (serves both admin and public content)
2. `NEXTAUTH_URL`: The authentication URL (should be the same as WEBAPP_URL)

### Example Configuration

```bash
WEBAPP_URL=https://formbricks.example.com
NEXTAUTH_URL=https://formbricks.example.com
```

### Important Notes

- Both URLs must be the same for authentication to work properly
- The URLs should be the full URL including the protocol (http:// or https://)
- Make sure your domain is properly configured in your DNS settings
- If you're using HTTPS (recommended), ensure you have valid SSL certificates installed

## Public / Private Domain Split

Formbricks now supports a powerful domain separation feature that allows you to serve public content (surveys, public APIs) from a different domain than your private admin interface. This provides enhanced security and better organization.

### Why Use Domain Split?

- **Enhanced Security**: Separate public-facing surveys from your admin interface
- **Better Organization**: Use dedicated domains for different purposes (e.g., `admin.company.com` for management, `surveys.company.com` for public surveys)
- **Improved Performance**: Optimize each domain for its specific purpose

### Configuration

To set up Public/Private Domain Split:

1. **Private Domain (WEBAPP_URL)**: Your admin/management interface
2. **Public Domain (PUBLIC_URL)**: For surveys and public-facing content

### Example Configuration

```bash
# Private admin domain
WEBAPP_URL=https://admin.formbricks.example.com
NEXTAUTH_URL=https://admin.formbricks.example.com

# Public domain for surveys
PUBLIC_URL=https://surveys.example.com
```

### How It Works

When PUBLIC_URL is configured:

- **Admin Interface**: All admin/management functions are served from `WEBAPP_URL`
- **Public Surveys**: All survey links and public APIs use `PUBLIC_URL`
- **SDK Integration**: The public domain is used for all client-side SDK connections
- **Email Links**: Survey invitation emails use the public domain
- **Sharing Features**: Survey sharing uses the public domain

### Routes Available on the Public Domain

When PUBLIC_URL is configured, the following routes are automatically served from the public domain:

#### Survey Routes

- `/s/{surveyId}` - Individual survey access
- Embedded survey endpoints

#### API Routes

- `/api/v1/client/{environmentId}/*` - Client API endpoints

#### Storage Routes

- `/storage/{environmentId}/{accessType}/{fileName}` - Public file storage access

#### Health & Monitoring

- `/health` - Health check endpoint

#### Sharing & Embed Routes

- Survey sharing endpoints
- Embed widget routes
- Social sharing endpoints

All other routes are restricted to the private domain (`WEBAPP_URL`) for security purposes. The admin domain can access the health endpoint (/health) and public file storage (`/storage/{environmentId}/{accessType}/{fileName}`), while all other public routes are exclusively accessible on the public domain (`PUBLIC_URL`) and will return a 404 error if accessed from the admin domain.

### App URL SDK Changes

The domain separation introduces important changes to how SDKs connect to Formbricks:

#### Multi-Domain Setup SDK Configuration

When using PUBLIC_URL (multi-domain setup), all SDK configurations must use the **public domain**:

```js
// JavaScript/React/Vue.js/Next.js SDKs
formbricks.setup({
  environmentId: "your-environment-id",
  appUrl: "https://surveys.example.com", // Use PUBLIC_URL domain
});
```

```jsx
// React Native SDK
await formbricks.setup({
  environmentId: "your-environment-id",
  appUrl: "https://surveys.example.com", // Use PUBLIC_URL domain
});
```

```swift
// iOS Swift SDK
FormbricksSDK.shared.configure(
  appUrl: "https://surveys.example.com", // Use PUBLIC_URL domain
  environmentId: "yourEnvironmentId"
)
```

#### Single Domain Setup SDK Configuration

When PUBLIC_URL is not configured (single domain setup), SDKs use the admin domain:

```js
formbricks.setup({
  environmentId: "your-environment-id",
  appUrl: "https://formbricks.example.com", // Use WEBAPP_URL domain
});
```

#### Key SDK Changes Made

- **Component Updates**: `ConnectWithFormbricks` component now uses `publicDomain` prop instead of `webAppUrl`
- **Setup Instructions**: All setup instructions dynamically show the correct domain based on your configuration
- **Connection Flow**: Environment connection flow automatically uses the appropriate domain
- **File Uploads**: Public file uploads now route through the public domain
- **Survey Rendering**: Survey widgets and embeds automatically connect to the public domain

#### Migration for Existing SDK Implementations

If you're upgrading from a previous version:

1. **Check your current setup**: Identify if you're using single or multi-domain configuration
2. **Update appUrl parameter**: Ensure it points to the correct domain based on your setup
3. **Test connections**: Verify that surveys load correctly after the change
4. **Update documentation**: Update any internal documentation referencing the old domain structure

### DNS and SSL Configuration

1. **Set up DNS records** for both domains
2. **Configure SSL certificates** for both domains
3. **Update your reverse proxy** (nginx, Apache, Cloudflare, etc.) to route both domains to your Formbricks instance
4. **Firewall rules**: Ensure both domains can reach your Formbricks instance

### Important Security Considerations

- The public domain serves only survey-related content and public APIs
- Admin functionality is restricted to the private domain
- Authentication and sensitive operations only occur on the private domain
- Cross-origin requests are properly configured between the domains

### Fallback Behavior

If `PUBLIC_URL` is not set:

- All content (admin and public) is served from `WEBAPP_URL`
- The system behaves as a single domain setup
- No domain separation occurs

### Migration from SURVEY_URL

If you were previously using `SURVEY_URL`, it has been replaced by `PUBLIC_URL`. The functionality remains the same, but the naming is clearer:

```bash
# Old configuration
SURVEY_URL=https://surveys.example.com

# New configuration
PUBLIC_URL=https://surveys.example.com
```

If you have any questions or require help, feel free to reach out to us on [GitHub Discussions](https://github.com/formbricks/formbricks/discussions).
