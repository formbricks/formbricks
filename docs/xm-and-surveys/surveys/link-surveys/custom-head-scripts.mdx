---
title: "Custom Head Scripts"
description: "Add tracking pixels, analytics, or custom code to your link surveys for self-hosted instances."
icon: "code"
---

Custom Head Scripts allow you to inject custom HTML code into the `<head>` section of your **link surveys**. This is useful for adding tracking pixels, analytics scripts, chatbots, or any other third-party code.

<Note>
  Custom Head Scripts is only available for **link surveys on self-hosted instances**. This feature is not available for Website & App Surveys or on Formbricks Cloud.
</Note>

## Two Levels of Configuration

Custom Head Scripts can be configured at **two levels**:

1. **Workspace Level** - Scripts apply to all link surveys in your workspace
2. **Survey Level** - Scripts specific to individual surveys, with the ability to add to or replace workspace scripts

## When to Use Custom Head Scripts

Use Custom Head Scripts when you need to:

- Add analytics tools (Google Analytics, Plausible, Mixpanel, etc.)
- Integrate tracking pixels (Facebook Pixel, LinkedIn Insight Tag, etc.)
- Include custom JavaScript for advanced survey behavior
- Add third-party widgets or chatbots
- Inject custom meta tags or stylesheets

## Configuration Guide

### Workspace-Level Scripts

These scripts apply to **all link surveys** in your workspace.

<Frame>
  <img src="/images/xm-and-surveys/surveys/link-surveys/custom-head-scripts/workspace-setting.webp" alt="Custom Scripts in Workspace Settings" />
</Frame>

<Steps>
  <Step title="Navigate to Workspace Settings">
    Go to your Workspace Settings from the main navigation menu.
  </Step>

  <Step title="Locate Custom Scripts Section">
    Scroll down to the **Custom Scripts** card in the General settings.
  </Step>

  <Step title="Add Your Scripts">
    Paste your HTML code into the text area. You can include:
    
    - `<script>` tags (inline or with `src` attribute)
    - `<meta>` tags
    - `<link>` tags for stylesheets
    - `<style>` tags
    - `<noscript>` tags
    
    **Example:**
    
    ```html
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    ```
  </Step>

  <Step title="Save Your Changes">
    Click the **Save** button to apply your custom scripts to all link surveys.
  </Step>
</Steps>

### Survey-Level Scripts

Override or extend workspace scripts for **specific surveys**.

<Frame>
  <img src="/images/xm-and-surveys/surveys/link-surveys/custom-head-scripts/share-survey-modal-setting.webp" alt="Custom HTML tab in Share Survey Modal" />  
</Frame>

<Steps>
  <Step title="Open Share Survey Modal">
    Navigate to your survey and click the **Share** button to open the share modal.
  </Step>

  <Step title="Go to Custom HTML Tab">
    In the share modal, click on the **Custom HTML** tab under the "Share Settings" section.
  </Step>

  <Step title="Choose Script Mode">
    Select how you want survey scripts to interact with workspace scripts:
    
    - **Add to Workspace Scripts** - Survey scripts will be added **after** workspace scripts (both run)
    - **Replace Workspace Scripts** - Survey scripts will **replace** workspace scripts entirely (only survey scripts run)
  </Step>

  <Step title="Add Survey-Specific Scripts">
    Paste your HTML code into the "Survey Scripts" text area.
    
    **Example** (Facebook Pixel for a specific campaign):
    
    ```html
    <!-- Facebook Pixel for Campaign X -->
    <script>
      fbq('track', 'ViewContent', {
        content_name: 'Customer Satisfaction Survey',
        campaign: 'Q1-2024'
      });
    </script>
    ```
  </Step>

  <Step title="Save Changes">
    Click **Save** to apply the survey-specific scripts.
  </Step>
</Steps>

## Script Execution Modes

When configuring survey-level scripts, you have two options:

### Add Mode (Default)

Scripts from **both** workspace and survey levels are injected:

```
Workspace Scripts + Survey Scripts
```

**Use case:** Add survey-specific tracking while keeping general workspace analytics.

**Example:**
- Workspace: Google Analytics for all surveys
- Survey: Facebook Pixel for a specific marketing campaign
- Result: Both GA and FB Pixel run on this survey

### Replace Mode

**Only** survey-level scripts are injected (workspace scripts are ignored):

```
Survey Scripts only
```

**Use case:** Completely override workspace scripts for special surveys.

**Example:**
- Workspace: Standard analytics
- Survey: Different analytics for external client survey
- Result: Only the survey-specific scripts run

## Important Notes

### Security Warning

<Warning>
  Custom scripts execute in the context of your survey pages. Only add scripts from trusted sources. Malicious scripts could compromise your survey data or user privacy.
</Warning>

### Scripts Don't Load in Preview Mode

Custom Head Scripts are **not loaded** when viewing surveys in preview mode (both in the editor preview and when viewing the survey with `?preview=true`). This is intentional to:

- Prevent analytics tracking during testing
- Avoid triggering pixels or conversions during development
- Ensure a clean testing environment

To test your scripts, publish your survey and view it through the actual link survey URL without the preview parameter.

### Link Surveys Only

Custom Head Scripts **only work with link surveys**. They are not available for app/website surveys, as those surveys are embedded in your application and should use your application's existing script management.

### Cloud vs Self-Hosted

This feature is **only available on self-hosted instances**. Formbricks Cloud does not support Custom Head Scripts for security and performance reasons.

### Permissions

Only **Owners**, **Managers**, and members with **Manage** access can configure Custom Head Scripts.

## Common Use Cases

### Global Analytics (Workspace Level)

Set up Google Analytics for all surveys in your workspace:

```html
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
</script>
```

### Campaign-Specific Tracking (Survey Level - Add Mode)

Add Facebook Pixel tracking for a specific marketing campaign:

**Workspace Scripts:** Google Analytics (as above)

**Survey Scripts:**
```html
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', 'YOUR_PIXEL_ID');
  fbq('track', 'PageView');
</script>
```

**Result:** Both Google Analytics and Facebook Pixel run on this survey.

### Client-Specific Analytics (Survey Level - Replace Mode)

For an external client survey with their own analytics:

**Mode:** Replace

**Survey Scripts:**
```html
<!-- Client's Plausible Analytics -->
<script defer data-domain="client.example.com" src="https://plausible.io/js/script.js"></script>
```

**Result:** Only Plausible runs, workspace scripts are ignored.

### Custom Fonts (Workspace Level)

Load custom fonts for all your surveys:

```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Inter', sans-serif;
  }
</style>
```

## Troubleshooting

### Scripts Not Loading

If your scripts aren't loading, check:

1. **Is it a self-hosted instance?** Custom scripts only work on self-hosted Formbricks.
2. **Are you in preview mode?** Scripts don't load in previewâ€”test with the actual survey link.
3. **Check the browser console** for JavaScript errors that might prevent script execution.
4. **Verify your HTML syntax** is correct (properly closed tags, valid attributes).

### Script Conflicts

If multiple scripts conflict:

- Ensure scripts are compatible with each other
- Check for namespace collisions in global variables
- Load scripts in the correct order (dependencies first)

## Best Practices

1. **Use workspace scripts for global needs** - Analytics, fonts, and tools needed across all surveys
2. **Use survey scripts for specific campaigns** - Campaign tracking, A/B test scripts, client-specific code
3. **Choose the right mode:**
   - **Add mode** for most cases - Keeps workspace analytics while adding survey-specific tracking
   - **Replace mode** for complete overrides - External client surveys, special environments
4. **Keep scripts minimal** to maintain fast survey loading times
5. **Use async/defer attributes** for external script tags when possible
6. **Test thoroughly** after adding scripts to ensure survey functionality isn't affected
7. **Document your scripts** with HTML comments for future reference
8. **Validate HTML** to prevent rendering issues

<Info>
  **Pro Tip:** Start with workspace-level scripts for your core analytics, then use survey-level scripts in "Add" mode for campaign-specific tracking. Reserve "Replace" mode for special cases where you need complete control.
</Info>

